<!-- 
	
	options.html
	
	by
	Aleksandar Toplek, 
	JustBuild 2011.
	
	This file is under FreeBSD license that
	can be found in README.txt that came
	with this code.
	  
-->

<!DOCTYPE html>
<html>
	<head>

		<link type="text/css" href="ui-css/jquery-ui-styles.css" rel="stylesheet" />
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="jqueryui.js"></script>

		<title>Project Axeman - Options</title>

		<script type="text/javascript">

			$(function () {
				if (typeof (localStorage) == "undefined") {
					alert("Your browser does not support HTML5 localStorage. Try upgrading.");
				}
				else {
					Initialize();
				}
			});

			function Initialize() {
				$('#tabs').tabs();

				// General

				// Build
				SetupCheckboxButton("checkBuildResourceNeeded");

				// Market
				SetupCheckboxButton("checkMarketShowX2Shortcut");
				SetupCheckboxButton("checkMarketListMyVillages");
				SetupCheckboxButton("checkMarketShowJunkResource");

				// Send troops
				SetupCheckboxButton("checkSendTroopsListMyVillages");
			}

			function SetupCheckboxButton(name) {
				// TODO: Add try/catch block on saving
				// try {
				//     ...
				// } catch (e) {
				//     if (e == QUOTA_EXCEEDED_ERR) {
				//         alert(‘Quota exceeded!’); //data wasn’t successfully saved due to quota exceed so throw an error
				//     }
				// }

				var idName = "#" + name;
				var idNameLabelSpan = idName + "Label span";

				var savedValue = localStorage.getItem(name); // WARNING: Possible exception
				if (savedValue == null) {
					localStorage.setItem(name, "On"); // WARNING: Possible exception 
					savedValue = localStorage.getItem(name); // WARNING: Possible exception
				}

				if (savedValue === "On") $(idName).attr("checked", false);
				else $(idName).attr("checked", true);

				$(idName).button().click(function () {
					$(idNameLabelSpan).text($(idName).attr("checked") ? "Off" : "On");

					// Save current state
					localStorage.setItem(name, $(idNameLabelSpan).text()); // WARNING: Possible exception
				});

				$(idNameLabelSpan).text($(idName).attr("checked") ? "Off" : "On");
			}

		</script>
	</head>
	<body>
		<!-- Tabs menu -->
		<div id="tabs" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#tabs-1">General</a></li>
				<li class="ui-state-default ui-corner-top"><a href="#tabs-2">Building</a></li>
				<li class="ui-state-default ui-corner-top"><a href="#tabs-3">Marketplace</a></li>
				<li class="ui-state-default ui-corner-top"><a href="#tabs-4">Sending troops</a></li>
			</ul>
			<div id="tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom">

				<p>There is no general settings currently available...</p>

			</div>
			<div id="tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
				
				<table>
					
					<tr>
						<td>Resource indicator&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td>
							<input type="checkbox" id="checkBuildResourceNeeded" class="ui-helper-hidden-accessible">
							<label id="checkBuildResourceNeededLabel" for="checkBuildResourceNeeded" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" />
						</td>						
					</tr>

				</table>

			</div>
			<div id="tabs-3" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
				
				<table>

					<tr>
						<td>Show X2 shortcut&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td>
							<input type="checkbox" id="checkMarketShowX2Shortcut" class="ui-helper-hidden-accessible">
							<label id="checkMarketShowX2ShortcutLabel" for="checkMarketShowX2Shortcut" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" />
						</td>
					</tr>

					<tr>
						<td>List my villages in combobox&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td>
							<input type="checkbox" id="checkMarketListMyVillages" class="ui-helper-hidden-accessible">
							<label id="checkMarketListMyVillagesLabel" for="checkMarketListMyVillages" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" />
						</td>
					</tr>

					
					<tr>
						<td>Show junk resource&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td>
							<input type="checkbox" id="checkMarketShowJunkResource" class="ui-helper-hidden-accessible">
							<label id="checkMarketShowJunkResourceLabel" for="checkMarketShowJunkResource" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" />
						</td>
					</tr>

				</table>

			</div>

			<div id="tabs-4" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
				
				<table>
				
					<tr>
						<td>Lis my villages in combobox&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td>
							<input type="checkbox" id="checkSendTroopsListMyVillages" class="ui-helper-hidden-accessible">
							<label id="checkSendTroopsListMyVillagesLabel" for="checkSendTroopsListMyVillages" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" arial-enabled="false" />
						</td>
					</tr>

				</table>

			</div>
		</div>

	</body>
</html>